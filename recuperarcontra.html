<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Comparación: Flujo Lógico vs Flujo Roto</title>
<style>
:root {
  --cyan: #00E6E6;
  --purple: #8B47EE;
  --gradient-primary: linear-gradient(135deg, #00E6E6, #8B47EE);
  --gradient-secondary: linear-gradient(135deg, #8B47EE, #00E6E6);
  --white: #FFFFFF;
  --dark-gray: hsl(240 10% 3.9%);
  --mid-gray: #2c2c2c;
  --border-gray: #444;
  --success: rgb(34, 197, 94);
  --warning: rgb(234, 179, 8);
  --error: rgb(239, 68, 68);
}

body {
  background-color: var(--dark-gray);
  color: var(--white);
  font-family: 'Segoe UI', sans-serif;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  gap: 40px;
  height: 100vh;
  margin: 0;
  padding: 30px;
}

.container {
  background: #1a1a1a;
  padding: 25px;
  border-radius: 16px;
  box-shadow: 0 0 25px rgba(0, 0, 0, 0.6);
  width: 360px;
  border: 1px solid rgba(255, 255, 255, 0.05);
  display: flex;
  flex-direction: column;
  align-items: center;
}

h1 {
  font-size: 1.8rem;
  font-weight: bold;
  background: var(--gradient-primary);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 5px;
}

h2 {
  color: var(--cyan);
  margin-bottom: 20px;
  text-align: center;
}

.form-group {
  margin-bottom: 15px;
  text-align: left;
  width: 100%;
}

label {
  display: block;
  margin-bottom: 6px;
  font-size: 0.9rem;
  color: #cfcfcf;
}

input[type="text"], input[type="password"] {
  width: 100%;
  padding: 10px;
  background: var(--mid-gray);
  border: 1px solid var(--border-gray);
  border-radius: 8px;
  color: var(--white);
  outline: none;
  transition: border 0.3s, box-shadow 0.3s;
}

input:focus {
  border-color: var(--cyan);
  box-shadow: 0 0 8px rgba(0, 230, 230, 0.4);
}

.error {
  color: var(--error);
  font-size: 0.8rem;
  margin-top: 4px;
}

.info {
  background: rgba(0, 230, 230, 0.1);
  padding: 10px;
  border-radius: 8px;
  color: var(--success);
  font-size: 0.85rem;
  margin-bottom: 10px;
  border-left: 3px solid var(--cyan);
}

button {
  width: 100%;
  background: var(--gradient-primary);
  border: none;
  padding: 10px;
  border-radius: 8px;
  color: var(--white);
  cursor: pointer;
  font-weight: bold;
  transition: transform 0.2s, opacity 0.3s;
  margin-top: 10px;
}

button:hover:enabled {
  transform: translateY(-2px);
  opacity: 0.9;
}

button:disabled {
  background: #2a2a2a;
  cursor: not-allowed;
  opacity: 0.5;
}

.hidden { display: none; }
footer { margin-top: 20px; font-size: 0.8rem; color: #888; }

#modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0,0,0,0.7);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 999;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s;
}

#modal.show {
  opacity: 1;
  pointer-events: auto;
}

#modalContent {
  background: #1e1e1e;
  padding: 25px 35px;
  border-radius: 12px;
  text-align: center;
  box-shadow: 0 0 20px rgba(0, 230, 230, 0.3);
  border: 1px solid rgba(255,255,255,0.05);
}

#modalContent p {
  margin-bottom: 20px;
  font-size: 1rem;
  color: var(--success);
}

#modalContent button {
  width: auto;
  padding: 8px 20px;
  background: var(--gradient-secondary);
}
</style>
</head>
<body>

<!-- FLUJO LÓGICO -->
<div class="container" id="flujo-logico">
  <h1>TRIMLY</h1>
  <h2>Flujo Lógico</h2>
  <div id="info1" class="info hidden"></div>

  <form id="formEmail1">
    <div class="form-group">
      <label for="email1">Correo electrónico</label>
      <input type="text" id="email1" placeholder="usuario01@gmail.com">
      <div id="emailError1" class="error"></div>
    </div>
    <button type="submit" disabled>Enviar código</button>
  </form>

  <form id="formCodigo1" class="hidden">
    <div class="form-group">
      <label for="codigo1">Código de seguridad</label>
      <input type="text" id="codigo1" maxlength="6" placeholder="345678">
      <div id="codigoError1" class="error"></div>
    </div>
    <button type="submit" disabled>Verificar código</button>
  </form>

  <form id="formContrasena1" class="hidden">
    <div id="passwordInfo" class="info">
      La contraseña debe tener mínimo 8 caracteres, al menos una mayúscula y un número o símbolo
    </div>
    <div class="form-group">
      <label for="password1">Nueva contraseña</label>
      <input type="password" id="password1" placeholder="Nueva contraseña">
      <div id="passwordError1" class="error"></div>
    </div>
    <div class="form-group">
      <label for="confirmar1">Confirmar contraseña</label>
      <input type="password" id="confirmar1" placeholder="Repite la contraseña">
      <div id="confirmError1" class="error"></div>
    </div>
    <button type="submit" disabled>Actualizar contraseña</button>
  </form>

  <footer>Flujo correcto y validado</footer>
</div>

<!-- FLUJO ROTO -->
<div class="container" id="flujo-roto">
  <h1>TRIMLY</h1>
  <h2>Flujo Roto</h2>

  <div class="form-group">
    <label>Ingrese</label>
    <input type="text" placeholder="Ingrese">
  </div>
  <div class="form-group">
    <label>Código</label>
    <input type="text">
  </div>
  <div class="form-group">
    <label>Nueva</label>
    <input type="password">
  </div>
  <button id="btn-roto">Actualizar</button>

  <footer>Flujo roto</footer>
</div>

<!-- MODAL -->
<div id="modal">
  <div id="modalContent">
    <p id="modalMessage">Mensaje</p>
    <button id="closeModal">Aceptar</button>
  </div>
</div>

<script>
const HARDCODED_EMAIL = "usuario01@gmail.com";
const HARDCODED_CODE = "345678";

const formEmail1 = document.getElementById('formEmail1');
const formCodigo1 = document.getElementById('formCodigo1');
const formContrasena1 = document.getElementById('formContrasena1');
const info1 = document.getElementById('info1');
const password1 = document.getElementById('password1');
const passwordInfo = document.getElementById('passwordInfo');
const confirm1 = document.getElementById('confirmar1');
const passwordError1 = document.getElementById('passwordError1');
const confirmError1 = document.getElementById('confirmError1');

const modal = document.getElementById('modal');
const modalMessage = document.getElementById('modalMessage');
const closeModal = document.getElementById('closeModal');

document.querySelectorAll('#flujo-logico input').forEach(input => {
  input.addEventListener('input', () => {
    const form = input.closest('form');
    const button = form.querySelector('button[type="submit"]');
    button.disabled = !input.value.trim();
  });
});

formEmail1.addEventListener('submit', e => {
  e.preventDefault();
  const email = document.getElementById('email1').value.trim();
  const emailError = document.getElementById('emailError1');
  emailError.textContent = '';
  info1.classList.add('hidden');

  if (!email) { emailError.textContent = 'El email es obligatorio'; return; }
  if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) { emailError.textContent = 'Formato inválido'; return; }
  if (email !== HARDCODED_EMAIL) { emailError.textContent = 'Cuenta no encontrada'; return; }

  info1.textContent = `Código enviado a ${email} (código: ${HARDCODED_CODE})`;
  info1.classList.remove('hidden');
  formEmail1.classList.add('hidden');
  formCodigo1.classList.remove('hidden');
});

formCodigo1.addEventListener('submit', e => {
  e.preventDefault();
  const codigo = document.getElementById('codigo1').value.trim();
  const codigoError = document.getElementById('codigoError1');
  codigoError.textContent = '';
  info1.classList.add('hidden');

  if (!codigo) { codigoError.textContent = 'El código es obligatorio'; return; }
  if (!/^[0-9]{6}$/.test(codigo)) { codigoError.textContent = 'Debe tener 6 dígitos'; return; }
  if (codigo !== HARDCODED_CODE) { codigoError.textContent = 'Código incorrecto'; return; }

  info1.textContent = 'Código verificado. Puede crear una nueva contraseña';
  info1.classList.remove('hidden');
  formCodigo1.classList.add('hidden');
  formContrasena1.classList.remove('hidden');
});

password1.addEventListener('input', () => {
  const val = password1.value;
  let mensajes = [];
  if (val.length < 8) mensajes.push("mínimo 8 caracteres");
  if (!/[A-Z]/.test(val)) mensajes.push("al menos una mayúscula");
  if (!/[0-9\W_]/.test(val)) mensajes.push("al menos un número o símbolo");

  passwordInfo.textContent = mensajes.length ? "Faltan: " + mensajes.join(", ") : "La contraseña cumple todos los requisitos ✔";
  passwordInfo.style.color = mensajes.length ? "var(--warning)" : "var(--success)";
});

formContrasena1.addEventListener('submit', e => {
  e.preventDefault();
  const val = password1.value;
  const conf = confirm1.value;
  passwordError1.textContent = '';
  confirmError1.textContent = '';

  if (val.length < 8 || !/[A-Z]/.test(val) || !/[0-9\W_]/.test(val)) { passwordError1.textContent = 'Contraseña no válida'; return; }
  if (val !== conf) { confirmError1.textContent = 'Las contraseñas no coinciden'; return; }

  modalMessage.textContent = 'Contraseña actualizada correctamente';
  modal.classList.add('show');
});

document.getElementById('btn-roto').addEventListener('click', () => {
  modalMessage.textContent = 'Contraseña actualizada correctamente';
  modal.classList.add('show');
});

closeModal.addEventListener('click', () => {
  modal.classList.remove('show');
  formEmail1.reset();
  formCodigo1.reset();
  formContrasena1.reset();
});
</script>
</body>
</html>
